"use strict";(()=>{const e=2*Math.PI,t=e=>Math.min(1,Math.max(0,e)),a=(e,t=210)=>(t+140*e+360)%360,n=(e,t=128,a=210)=>{const n=e*(t/128);return`hsl(${(a+.5*(Math.sin(n)+1)*120)%360}deg 75% 55%)`},o=(e,t)=>({width:e.displayWidth||t.clientWidth||t.width||1,height:e.displayHeight||t.clientHeight||t.height||1}),s=(e,t={})=>new SineWaveGenerator({el:e,...t}),i=(t,a,n)=>{const o=document.querySelector(`[data-example="${t}"]`);if(!o)return;const i=o.querySelector("canvas");if(!i)return;const r=(e=>{const t={bpm:96,amplitude:16,frequency:8,phase:0};return Array.from(e.querySelectorAll("[data-control]")).forEach(e=>{const a=e.dataset.control;t[a]=Number(e.value);const n=e.closest(".control-row").querySelector("[data-value]");n&&(n.textContent=e.value),e.addEventListener("input",()=>{t[a]=Number(e.value),n&&(n.textContent=e.value)})}),t})(o),l=s(i),h=(e=>{let t=!1;return a=>{t||(t=!0,console.error(`[sine-wave-generator] ${e} failed`,a))}})(t);l.addWave({amplitude:1,wavelength:1,speed:.05});const d=l.ctx;l.drawWave=(t,o=1)=>{try{const s=((e,t)=>e/(3600*Math.max(1,t)))(r.bpm,a),h=t.phase+r.phase*Math.PI/180;n({ctx:d,canvas:i,generator:l,controls:r,time:h}),t.phase+=s*e*o}catch(e){h(e),l.stop()}},l.start()},r=(e,t)=>{const a=.1909830056250526;if(e<a||e>1-a)return 0;const n=(e-a)/(1-2*a);return Math.sin(n*Math.PI)*t},l=({ctx:n,canvas:s,controls:i,time:r,generator:l})=>{const{width:h,height:d}=o(l,s),c=h/16,u=d/10,g=.3*i.frequency,m=i.amplitude;for(let o=0;o<=10;o+=1)for(let s=0;s<=16;s+=1){const i=s*g+r,l=o*g+r,h=Math.sin(i)*Math.cos(l),d=4+m*t((h+1)/2),v=a(h,190);n.fillStyle=`hsl(${v}deg 70% 60%)`,n.beginPath(),n.arc(s*c+.2*c,o*u+.2*u,.25*d,0,e),n.fill()}},h=({ctx:t,canvas:n,controls:s,time:i,generator:r})=>{const{width:l,height:h}=o(r,n),d=s.amplitude,c=.04*s.frequency,u=.5*l;t.lineWidth=2;for(let n=0;n<=h;n+=6){const o=n*c+i,s=Math.sin(o)*d,r=Math.sin(o+Math.PI)*d,l=.5*(Math.cos(o)+1),h=a(l,210);t.strokeStyle=`hsla(${h}deg 80% 60% / ${.35+.5*l})`,t.beginPath(),t.moveTo(u+s,n),t.lineTo(u+r,n),t.stroke(),t.fillStyle=`hsla(${h}deg 80% 55% / ${.4+.6*l})`,t.beginPath(),t.arc(u+s,n,3+2*l,0,e),t.fill(),t.beginPath(),t.arc(u+r,n,3+2*(1-l),0,e),t.fill()}},d=({ctx:e,canvas:t,controls:a,time:s,generator:i})=>{const{width:r,height:l}=o(i,t),h=a.amplitude,d=.05*a.frequency;for(let t=0;t<6;t+=1){const a=r/7*(t+1);e.beginPath();for(let n=0;n<=l;n+=6){const o=n*d+s+.6*t,i=a+Math.sin(o)*h;0===n?e.moveTo(i,n):e.lineTo(i,n)}const o=1.5+1.2*(Math.sin(s+t)+1);e.lineWidth=o,e.shadowBlur=12,e.shadowColor=n(s,128,200+10*t),e.strokeStyle=n(s,128,200+10*t),e.stroke()}e.shadowBlur=0},c=({ctx:e,canvas:t,controls:a,time:s,generator:i})=>{const{width:r,height:l}=o(i,t),h=.4*a.amplitude,d=.08*a.frequency;for(let t=0;t<50;t+=1){const a=t/50*r,o=t/50*l,i=Math.sin(s+t*d)*h,c=a+i,u=o+.5*i,g=c+24,m=u+38,v=.8+.05*Math.abs(i);e.lineWidth=v,e.shadowBlur=8,e.shadowColor=n(s,128,240),e.strokeStyle=n(s+.2*t,128,240),e.beginPath(),e.moveTo(c,u),e.lineTo(g,m),e.stroke()}e.shadowBlur=0},u=({ctx:t,canvas:s,controls:i,time:r,generator:l})=>{const{width:h,height:d}=o(l,s),c=.5*h,u=.5*d,g=i.amplitude,m=i.frequency,v=i.phase*Math.PI/180;t.lineWidth=1.5+1.4*Math.abs(Math.sin(r)),t.shadowBlur=10,t.shadowColor=n(r,128,240),t.beginPath();for(let a=0;a<=240;a+=1){const n=a/240*e,o=c+Math.sin(n*m+r)*g*.9,s=u+Math.sin(n*(m+1)+v+r)*g;0===a?t.moveTo(o,s):t.lineTo(o,s)}const p=a(Math.sin(r),240);t.strokeStyle=`hsla(${p}deg 75% 55% / 0.8)`,t.stroke(),t.shadowBlur=0;const w=c+Math.sin(r*m)*g*.9,f=u+Math.sin(r*(m+1)+v)*g;t.fillStyle=`hsl(${p}deg 80% 60%)`,t.beginPath(),t.arc(w,f,6,0,e),t.fill()},g=({ctx:t,canvas:a,controls:s,time:i,generator:r})=>{const{width:l,height:h}=o(r,a),d=.5*l,c=.5*h,u=s.amplitude,g=.8*s.amplitude,m=Math.max(1,Math.round(s.frequency)),v=Math.max(1,Math.round(s.frequency+2)),p=s.phase*Math.PI/180;t.lineWidth=1.5+1.8*Math.abs(Math.sin(i)),t.shadowBlur=10,t.shadowColor=n(i,128,220),t.beginPath();for(let a=0;a<=320;a+=1){const n=a/320*e,o=d+u*Math.sin(m*n+p+i),s=c+g*Math.sin(v*n+i);0===a?t.moveTo(o,s):t.lineTo(o,s)}t.strokeStyle=n(i,128,220),t.stroke(),t.shadowBlur=0},m=({ctx:e,canvas:t,controls:s,time:i,generator:r})=>{const{width:l,height:h}=o(r,t),d=.5*h,c=s.amplitude,u=.04*s.frequency,g=.5*(Math.sin(.8*i)+1);e.beginPath();for(let t=0;t<=l;t+=4){const a=Math.sin(.006*t+i)*c*(.2+g),n=d+Math.sin(t*u+1.6*i)*a;0===t?e.moveTo(t,n):e.lineTo(t,n)}const m=a(g,260);e.lineWidth=1.5+2.2*g,e.shadowBlur=10,e.shadowColor=n(i,128,260),e.strokeStyle=`hsla(${m}deg 70% 55% / 0.85)`,e.stroke(),e.shadowBlur=0},v=({ctx:e,canvas:t,controls:n,time:s,generator:i})=>{const{width:r,height:l}=o(i,t),h=.03*n.frequency,d=n.amplitude;for(let t=0;t<8;t+=1){const o=t/7,i=l*(.2+.7*o),c=s+o*n.phase*.03;e.beginPath();for(let t=0;t<=r;t+=6){const a=d*(1-o)+6,n=i+Math.sin(t*h+c)*a;0===t?e.moveTo(t,n):e.lineTo(t,n)}const u=a(o,200);e.strokeStyle=`hsla(${u}deg 70% 55% / ${.2+.6*o})`,e.lineWidth=1.6,e.stroke()}},p=({ctx:t,canvas:s,controls:i,time:r,generator:l})=>{const{width:h,height:d}=o(l,s),c=.5*h,u=.5*d,g=.45*Math.min(h,d),m=.15*i.frequency,v=i.amplitude,p=r/e%1,w=Math.pow(Math.max(0,Math.cos(p*e)),6);for(let o=18;o<g;o+=12){const s=Math.sin(o*m+r),i=s*(v*(.4+w)),l=Math.max(1,o+i),h=a(s,280);t.strokeStyle=`hsla(${h}deg 75% 60% / 0.6)`,t.lineWidth=1+1.8*Math.abs(s),t.shadowBlur=10,t.shadowColor=n(r,128,280),t.beginPath(),t.arc(c,u,l,0,e),t.stroke()}t.shadowBlur=0},w=({ctx:e,canvas:t,controls:n,time:s,generator:i})=>{const{width:r,height:l}=o(i,t),h=10+2*n.frequency,d=.25*Math.sin(s)+n.phase*Math.PI/360,c=.5*r,u=.5*l,g=.75*Math.max(r,l),m=(t,n)=>{e.save(),e.translate(c,u),e.rotate(t),e.translate(-c,-u);for(let t=-g;t<=r+g;t+=h){const o=Math.sin(t/h*.35+s),i=a(o,n);e.strokeStyle=`hsla(${i}deg 70% 60% / 0.35)`,e.beginPath(),e.moveTo(t,-g),e.lineTo(t,l+g),e.stroke()}e.restore()};m(d,180),m(1.3*-d,240)},f=({ctx:e,canvas:t,controls:n,time:s,generator:i})=>{const{width:r,height:l}=o(i,t),h=n.amplitude,d=.6*n.frequency;e.textAlign="center",e.textBaseline="middle",e.font="600 28px 'SF Pro Text', 'Helvetica Neue', sans-serif";const c="SINE WAVE".split(""),u=18*c.length;c.forEach((t,n)=>{const o=n-c.length/2,i=Math.sin(s+o*d)*h,u=a(i/h,210);e.fillStyle=`hsl(${u}deg 80% 55%)`,e.fillText(t,.5*r+18*o,.5*l+i)}),e.strokeStyle="rgba(15, 23, 42, 0.1)",e.strokeRect(.5*r-.5*u-16,.5*l-30,u+32,60)},y=({ctx:t,canvas:n,controls:s,time:i,generator:r})=>{const{width:l,height:h}=o(r,n),d=.5*h,c=s.amplitude,u=.03*s.frequency,g=i/e%1,m=Math.exp(-3.2*g);t.beginPath();for(let e=0;e<=l;e+=4){const a=d+Math.sin(e*u+i)*c*m;0===e?t.moveTo(e,a):t.lineTo(e,a)}const v=a(m,140);t.strokeStyle=`hsla(${v}deg 70% 55% / 0.8)`,t.lineWidth=2,t.stroke()},M=({ctx:e,canvas:t,controls:s,time:i,generator:r})=>{const{width:l,height:h}=o(r,t),d=.5*h,c=s.amplitude,u=.02*s.frequency,g=.02*Math.sin(.8*i)*s.frequency;e.beginPath();for(let t=0;t<=l;t+=4){const a=.6*Math.sin(i+t*u*.4)+1,n=d+Math.sin(t*(u+g*a)+i)*c*(.6+.4*a);0===t?e.moveTo(t,n):e.lineTo(t,n)}const m=a(Math.sin(i),260);e.strokeStyle=`hsla(${m}deg 70% 55% / 0.85)`,e.lineWidth=1.5+1.5*Math.abs(Math.sin(i)),e.shadowBlur=8,e.shadowColor=n(i,128,260),e.stroke(),e.shadowBlur=0},x=()=>{"function"==typeof window.SineWaveGenerator?((()=>{const e=document.querySelector(".site-header"),t=document.querySelector(".nav-toggle");e&&t&&t.addEventListener("click",()=>{const a=e.classList.toggle("nav-open");t.setAttribute("aria-expanded",a?"true":"false")})})(),(()=>{const a=document.getElementById("sineCanvasBasic");if(a){const e=s(a);e.addWave({amplitude:26,wavelength:140,speed:.04,segmentLength:10}),e.start()}const n=document.getElementById("sineCanvasMulti");if(n){const e=s(n);e.addWave({amplitude:18,wavelength:140,speed:.04,segmentLength:10}),e.addWave({amplitude:28,wavelength:200,speed:.035,segmentLength:12,strokeStyle:"rgba(14,165,233,0.5)"}),e.addWave({amplitude:12,wavelength:90,speed:.05,segmentLength:8,strokeStyle:"rgba(15,23,42,0.35)"}),e.start()}const o=document.getElementById("sineCanvasPointer");if(o){const a=s(o);a.addWave({amplitude:32,wavelength:180,speed:.045,segmentLength:8});const n={x:.5,y:.5,rafId:null},i=()=>{n.rafId=null;const t=40+120*(1-2*Math.abs(n.y-.5)),o=120+240*(1-2*Math.abs(n.x-.5));a.waves.forEach(a=>{a.amplitude=t,a.wavelength=o,a.phase=n.y*e})};o.addEventListener("pointermove",e=>{const a=o.getBoundingClientRect();n.x=t((e.clientX-a.left)/a.width),n.y=t((e.clientY-a.top)/a.height),n.rafId||(n.rafId=requestAnimationFrame(i))}),a.start()}const i=document.getElementById("sineCanvasDynamic");if(i){const e=s(i),t=[{amplitude:12,wavelength:100,speed:.035,segmentLength:10},{amplitude:20,wavelength:140,speed:.04,segmentLength:10},{amplitude:28,wavelength:180,speed:.045,segmentLength:10},{amplitude:36,wavelength:220,speed:.05,segmentLength:12},{amplitude:18,wavelength:120,speed:.038,segmentLength:8}];let a=0,n=!1;const o=()=>{e.waves.length<t.length?(e.addWave(t[a]),a=(a+1)%t.length,setTimeout(o,400)):n||(n=!0,setTimeout(r,600))},r=()=>{e.waves.length>1?(e.removeWave(0),setTimeout(r,400)):(n=!1,setTimeout(o,600))};o(),e.start()}const l=document.getElementById("sineCanvasPerformance");if(l){const e=s(l,{maxPixelRatio:1});e.addWave({amplitude:18,wavelength:160,speed:.035,segmentLength:14}),e.addWave({amplitude:10,wavelength:120,speed:.04,segmentLength:16}),e.addWave({amplitude:6,wavelength:90,speed:.045,segmentLength:18}),e.start()}const h=document.getElementById("sineCanvasEasing");if(h){const e=s(h);e.addWave({amplitude:30,wavelength:160,speed:.04,segmentLength:10,easing:r}),e.start()}const d=document.getElementById("sineCanvasPause");if(d){const e=s(d);e.addWave({amplitude:24,wavelength:150,speed:.04,segmentLength:10});const t=document.querySelector('[data-action="pause"]'),a=document.querySelector('[data-action="resume"]');t&&t.addEventListener("click",()=>e.stop()),a&&a.addEventListener("click",()=>e.start()),e.start()}})(),i("pulseMatrix",4,l),i("dnaHelix",4,h),i("fluidColumn",4,d),i("diagonalRain",4,c),i("lissajousOrbit",3,u),i("lissajousExplorer",4,g),i("feedbackLoop",4,m),i("waveformTerrain",6,v),i("radialBloom",4,p),i("labOcean",6,v),i("labHelix",4,h),i("labPulse",4,p),i("labOrbit",3,u),i("moireInterference",4,w),i("kineticTypography",4,f),i("dampedSine",4,y),i("recursiveSine",4,M),(()=>{const e=document.querySelector('[data-example="stringPhysics"]');if(!e)return;const t=e.querySelector("canvas");if(!t)return;const a=s(t);a.addWave({amplitude:1,wavelength:1,speed:.08});const i={amplitude:0,decay:.95};t.addEventListener("pointerdown",()=>{i.amplitude=100});const r=a.ctx;a.drawWave=(e,s=1)=>{i.amplitude*=i.decay;const{width:l,height:h}=o(a,t),d=.5*h;r.beginPath();for(let t=0;t<=l;t+=6){const a=d+Math.sin(.02*t+e.phase)*i.amplitude*.02;0===t?r.moveTo(t,a):r.lineTo(t,a)}r.lineWidth=1+.02*Math.abs(i.amplitude),r.shadowBlur=10,r.shadowColor=n(e.phase,128,210),r.strokeStyle=n(e.phase,128,210),r.stroke(),r.shadowBlur=0,e.phase+=.02*s},a.start()})(),(()=>{const e=document.querySelector('[data-example="audioSpectrogram"]');if(!e)return;const t=e.querySelector("canvas"),n=e.querySelector("[data-action=audio-start]"),i=e.querySelector("[data-audio-status]");if(!t||!n||!i)return;const r=s(t);r.addWave({amplitude:1,wavelength:1,speed:.05});const l=r.ctx;let h=null,d=null;n.addEventListener("click",()=>{h||(i.textContent="Listening",(async()=>{try{const e=new(window.AudioContext||window.webkitAudioContext),t=await navigator.mediaDevices.getUserMedia({audio:!0}),a=e.createMediaStreamSource(t);h=e.createAnalyser(),h.fftSize=128,d=new Uint8Array(h.frequencyBinCount),a.connect(h),i.textContent="Live"}catch(e){i.textContent="Blocked"}})())}),r.drawWave=(e,n=1)=>{const{width:s,height:i}=o(r,t);h&&d&&h.getByteFrequencyData(d);const c=s/64;l.lineWidth=1.5;for(let t=0;t<64;t+=1){const n=Math.floor(t/64*(d?d.length:64)),o=d?d[n]/255:.5*(Math.sin(e.phase+.2*t)+1),s=o*(.3*i),r=t*c+.5*c,h=.5*i;l.beginPath(),l.moveTo(r,h-s),l.lineTo(r,h+s);const u=a(o,180+t);l.strokeStyle=`hsla(${u}deg 80% 55% / 0.7)`,l.stroke()}e.phase+=.02*n},r.start()})()):setTimeout(x,50)};document.addEventListener("DOMContentLoaded",()=>{x()})})();