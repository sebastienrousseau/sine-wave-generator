"use strict";(()=>{const e=2*Math.PI,t=e=>Math.min(1,Math.max(0,e)),a=(e,t=210)=>(t+140*e+360)%360,n=(e,t=128,a=210)=>{const n=e*(t/128);return`hsl(${(a+.5*(Math.sin(n)+1)*120)%360}deg 75% 55%)`},s=(e,t)=>({width:e.displayWidth||t.clientWidth||t.width||1,height:e.displayHeight||t.clientHeight||t.height||1}),o=(e,t={})=>new SineWaveGenerator({el:e,...t}),i=(t,a,n)=>{const s=document.querySelector(`[data-example="${t}"]`);if(!s)return;const i=s.querySelector("canvas");if(!i)return;const l=(e=>{const t={bpm:96,amplitude:16,frequency:8,phase:0};return Array.from(e.querySelectorAll("[data-control]")).forEach(e=>{const a=e.dataset.control;t[a]=Number(e.value);const n=e.closest(".control-row").querySelector("[data-value]");n&&(n.textContent=e.value),e.addEventListener("input",()=>{t[a]=Number(e.value),n&&(n.textContent=e.value)})}),t})(s),r=o(i);r.addWave({amplitude:1,wavelength:1,speed:.05});const h=r.ctx;r.drawWave=(t,s=1)=>{const o=((e,t)=>e/(3600*Math.max(1,t)))(l.bpm,a),d=t.phase+l.phase*Math.PI/180;n({ctx:h,canvas:i,generator:r,controls:l,time:d}),t.phase+=o*e*s},r.start()},l=(e,t)=>{const a=.1909830056250526;if(e<a||e>1-a)return 0;const n=(e-a)/(1-2*a);return Math.sin(n*Math.PI)*t},r=({ctx:n,canvas:o,controls:i,time:l,generator:r})=>{const{width:h,height:d}=s(r,o),c=h/16,u=d/10,g=.3*i.frequency,m=i.amplitude;for(let s=0;s<=10;s+=1)for(let o=0;o<=16;o+=1){const i=o*g+l,r=s*g+l,h=Math.sin(i)*Math.cos(r),d=4+m*t((h+1)/2),v=a(h,190);n.fillStyle=`hsl(${v}deg 70% 60%)`,n.beginPath(),n.arc(o*c+.2*c,s*u+.2*u,.25*d,0,e),n.fill()}},h=({ctx:t,canvas:n,controls:o,time:i,generator:l})=>{const{width:r,height:h}=s(l,n),d=o.amplitude,c=.04*o.frequency,u=.5*r;t.lineWidth=2;for(let n=0;n<=h;n+=6){const s=n*c+i,o=Math.sin(s)*d,l=Math.sin(s+Math.PI)*d,r=.5*(Math.cos(s)+1),h=a(r,210);t.strokeStyle=`hsla(${h}deg 80% 60% / ${.35+.5*r})`,t.beginPath(),t.moveTo(u+o,n),t.lineTo(u+l,n),t.stroke(),t.fillStyle=`hsla(${h}deg 80% 55% / ${.4+.6*r})`,t.beginPath(),t.arc(u+o,n,3+2*r,0,e),t.fill(),t.beginPath(),t.arc(u+l,n,3+2*(1-r),0,e),t.fill()}},d=({ctx:e,canvas:t,controls:a,time:o,generator:i})=>{const{width:l,height:r}=s(i,t),h=a.amplitude,d=.05*a.frequency;for(let t=0;t<6;t+=1){const a=l/7*(t+1);e.beginPath();for(let n=0;n<=r;n+=6){const s=n*d+o+.6*t,i=a+Math.sin(s)*h;0===n?e.moveTo(i,n):e.lineTo(i,n)}const s=1.5+1.2*(Math.sin(o+t)+1);e.lineWidth=s,e.shadowBlur=12,e.shadowColor=n(o,128,200+10*t),e.strokeStyle=n(o,128,200+10*t),e.stroke()}e.shadowBlur=0},c=({ctx:e,canvas:t,controls:a,time:o,generator:i})=>{const{width:l,height:r}=s(i,t),h=.4*a.amplitude,d=.08*a.frequency;for(let t=0;t<50;t+=1){const a=t/50*l,s=t/50*r,i=Math.sin(o+t*d)*h,c=a+i,u=s+.5*i,g=c+24,m=u+38,v=.8+.05*Math.abs(i);e.lineWidth=v,e.shadowBlur=8,e.shadowColor=n(o,128,240),e.strokeStyle=n(o+.2*t,128,240),e.beginPath(),e.moveTo(c,u),e.lineTo(g,m),e.stroke()}e.shadowBlur=0},u=({ctx:t,canvas:o,controls:i,time:l,generator:r})=>{const{width:h,height:d}=s(r,o),c=.5*h,u=.5*d,g=i.amplitude,m=i.frequency,v=i.phase*Math.PI/180;t.lineWidth=1.5+1.4*Math.abs(Math.sin(l)),t.shadowBlur=10,t.shadowColor=n(l,128,240),t.beginPath();for(let a=0;a<=240;a+=1){const n=a/240*e,s=c+Math.sin(n*m+l)*g*.9,o=u+Math.sin(n*(m+1)+v+l)*g;0===a?t.moveTo(s,o):t.lineTo(s,o)}const p=a(Math.sin(l),240);t.strokeStyle=`hsla(${p}deg 75% 55% / 0.8)`,t.stroke(),t.shadowBlur=0;const w=c+Math.sin(l*m)*g*.9,f=u+Math.sin(l*(m+1)+v)*g;t.fillStyle=`hsl(${p}deg 80% 60%)`,t.beginPath(),t.arc(w,f,6,0,e),t.fill()},g=({ctx:t,canvas:a,controls:o,time:i,generator:l})=>{const{width:r,height:h}=s(l,a),d=.5*r,c=.5*h,u=o.amplitude,g=.8*o.amplitude,m=Math.max(1,Math.round(o.frequency)),v=Math.max(1,Math.round(o.frequency+2)),p=o.phase*Math.PI/180;t.lineWidth=1.5+1.8*Math.abs(Math.sin(i)),t.shadowBlur=10,t.shadowColor=n(i,128,220),t.beginPath();for(let a=0;a<=320;a+=1){const n=a/320*e,s=d+u*Math.sin(m*n+p+i),o=c+g*Math.sin(v*n+i);0===a?t.moveTo(s,o):t.lineTo(s,o)}t.strokeStyle=n(i,128,220),t.stroke(),t.shadowBlur=0},m=({ctx:e,canvas:t,controls:o,time:i,generator:l})=>{const{width:r,height:h}=s(l,t),d=.5*h,c=o.amplitude,u=.04*o.frequency,g=.5*(Math.sin(.8*i)+1);e.beginPath();for(let t=0;t<=r;t+=4){const a=Math.sin(.006*t+i)*c*(.2+g),n=d+Math.sin(t*u+1.6*i)*a;0===t?e.moveTo(t,n):e.lineTo(t,n)}const m=a(g,260);e.lineWidth=1.5+2.2*g,e.shadowBlur=10,e.shadowColor=n(i,128,260),e.strokeStyle=`hsla(${m}deg 70% 55% / 0.85)`,e.stroke(),e.shadowBlur=0},v=({ctx:e,canvas:t,controls:n,time:o,generator:i})=>{const{width:l,height:r}=s(i,t),h=.03*n.frequency,d=n.amplitude;for(let t=0;t<8;t+=1){const s=t/7,i=r*(.2+.7*s),c=o+s*n.phase*.03;e.beginPath();for(let t=0;t<=l;t+=6){const a=d*(1-s)+6,n=i+Math.sin(t*h+c)*a;0===t?e.moveTo(t,n):e.lineTo(t,n)}const u=a(s,200);e.strokeStyle=`hsla(${u}deg 70% 55% / ${.2+.6*s})`,e.lineWidth=1.6,e.stroke()}},p=({ctx:t,canvas:o,controls:i,time:l,generator:r})=>{const{width:h,height:d}=s(r,o),c=.5*h,u=.5*d,g=.45*Math.min(h,d),m=.15*i.frequency,v=i.amplitude,p=l/e%1,w=Math.pow(Math.max(0,Math.cos(p*e)),6);for(let s=18;s<g;s+=12){const o=Math.sin(s*m+l),i=o*(v*(.4+w)),r=a(o,280);t.strokeStyle=`hsla(${r}deg 75% 60% / 0.6)`,t.lineWidth=1+1.8*Math.abs(o),t.shadowBlur=10,t.shadowColor=n(l,128,280),t.beginPath(),t.arc(c,u,s+i,0,e),t.stroke()}t.shadowBlur=0},w=({ctx:e,canvas:t,controls:n,time:o,generator:i})=>{const{width:l,height:r}=s(i,t),h=10+2*n.frequency,d=.25*Math.sin(o)+n.phase*Math.PI/360,c=.5*l,u=.5*r,g=.75*Math.max(l,r),m=(t,n)=>{e.save(),e.translate(c,u),e.rotate(t),e.translate(-c,-u);for(let t=-g;t<=l+g;t+=h){const s=Math.sin(t/h*.35+o),i=a(s,n);e.strokeStyle=`hsla(${i}deg 70% 60% / 0.35)`,e.beginPath(),e.moveTo(t,-g),e.lineTo(t,r+g),e.stroke()}e.restore()};m(d,180),m(1.3*-d,240)},f=({ctx:e,canvas:t,controls:n,time:o,generator:i})=>{const{width:l,height:r}=s(i,t),h=n.amplitude,d=.6*n.frequency;e.textAlign="center",e.textBaseline="middle",e.font="600 28px 'SF Pro Text', 'Helvetica Neue', sans-serif";const c="SINE WAVE".split(""),u=18*c.length;c.forEach((t,n)=>{const s=n-c.length/2,i=Math.sin(o+s*d)*h,u=a(i/h,210);e.fillStyle=`hsl(${u}deg 80% 55%)`,e.fillText(t,.5*l+18*s,.5*r+i)}),e.strokeStyle="rgba(15, 23, 42, 0.1)",e.strokeRect(.5*l-.5*u-16,.5*r-30,u+32,60)},y=({ctx:t,canvas:n,controls:o,time:i,generator:l})=>{const{width:r,height:h}=s(l,n),d=.5*h,c=o.amplitude,u=.03*o.frequency,g=i/e%1,m=Math.exp(-3.2*g);t.beginPath();for(let e=0;e<=r;e+=4){const a=d+Math.sin(e*u+i)*c*m;0===e?t.moveTo(e,a):t.lineTo(e,a)}const v=a(m,140);t.strokeStyle=`hsla(${v}deg 70% 55% / 0.8)`,t.lineWidth=2,t.stroke()},M=({ctx:e,canvas:t,controls:o,time:i,generator:l})=>{const{width:r,height:h}=s(l,t),d=.5*h,c=o.amplitude,u=.02*o.frequency,g=.02*Math.sin(.8*i)*o.frequency;e.beginPath();for(let t=0;t<=r;t+=4){const a=.6*Math.sin(i+t*u*.4)+1,n=d+Math.sin(t*(u+g*a)+i)*c*(.6+.4*a);0===t?e.moveTo(t,n):e.lineTo(t,n)}const m=a(Math.sin(i),260);e.strokeStyle=`hsla(${m}deg 70% 55% / 0.85)`,e.lineWidth=1.5+1.5*Math.abs(Math.sin(i)),e.shadowBlur=8,e.shadowColor=n(i,128,260),e.stroke(),e.shadowBlur=0},x=()=>{"function"==typeof window.SineWaveGenerator?((()=>{const a=document.getElementById("sineCanvasBasic");if(a){const e=o(a);e.addWave({amplitude:26,wavelength:140,speed:.04,segmentLength:10}),e.start()}const n=document.getElementById("sineCanvasMulti");if(n){const e=o(n);e.addWave({amplitude:18,wavelength:140,speed:.04,segmentLength:10}),e.addWave({amplitude:28,wavelength:200,speed:.035,segmentLength:12,strokeStyle:"rgba(14,165,233,0.5)"}),e.addWave({amplitude:12,wavelength:90,speed:.05,segmentLength:8,strokeStyle:"rgba(15,23,42,0.35)"}),e.start()}const s=document.getElementById("sineCanvasPointer");if(s){const a=o(s);a.addWave({amplitude:32,wavelength:180,speed:.045,segmentLength:8});const n={x:.5,y:.5,rafId:null},i=()=>{n.rafId=null;const t=40+120*(1-2*Math.abs(n.y-.5)),s=120+240*(1-2*Math.abs(n.x-.5));a.waves.forEach(a=>{a.amplitude=t,a.wavelength=s,a.phase=n.y*e})};s.addEventListener("pointermove",e=>{const a=s.getBoundingClientRect();n.x=t((e.clientX-a.left)/a.width),n.y=t((e.clientY-a.top)/a.height),n.rafId||(n.rafId=requestAnimationFrame(i))}),a.start()}const i=document.getElementById("sineCanvasDynamic");if(i){const e=o(i),t=[{amplitude:12,wavelength:100,speed:.035,segmentLength:10},{amplitude:20,wavelength:140,speed:.04,segmentLength:10},{amplitude:28,wavelength:180,speed:.045,segmentLength:10},{amplitude:36,wavelength:220,speed:.05,segmentLength:12},{amplitude:18,wavelength:120,speed:.038,segmentLength:8}];let a=0,n=!1;const s=()=>{e.waves.length<t.length?(e.addWave(t[a]),a=(a+1)%t.length,setTimeout(s,400)):n||(n=!0,setTimeout(l,600))},l=()=>{e.waves.length>1?(e.removeWave(0),setTimeout(l,400)):(n=!1,setTimeout(s,600))};s(),e.start()}const r=document.getElementById("sineCanvasPerformance");if(r){const e=o(r,{maxPixelRatio:1});e.addWave({amplitude:18,wavelength:160,speed:.035,segmentLength:14}),e.addWave({amplitude:10,wavelength:120,speed:.04,segmentLength:16}),e.addWave({amplitude:6,wavelength:90,speed:.045,segmentLength:18}),e.start()}const h=document.getElementById("sineCanvasEasing");if(h){const e=o(h);e.addWave({amplitude:30,wavelength:160,speed:.04,segmentLength:10,easing:l}),e.start()}const d=document.getElementById("sineCanvasPause");if(d){const e=o(d);e.addWave({amplitude:24,wavelength:150,speed:.04,segmentLength:10});const t=document.querySelector('[data-action="pause"]'),a=document.querySelector('[data-action="resume"]');t&&t.addEventListener("click",()=>e.stop()),a&&a.addEventListener("click",()=>e.start()),e.start()}})(),i("pulseMatrix",4,r),i("dnaHelix",4,h),i("fluidColumn",4,d),i("diagonalRain",4,c),i("lissajousOrbit",3,u),i("lissajousExplorer",4,g),i("feedbackLoop",4,m),i("waveformTerrain",6,v),i("radialBloom",4,p),i("labOcean",6,v),i("labHelix",4,h),i("labPulse",4,p),i("labOrbit",3,u),i("moireInterference",4,w),i("kineticTypography",4,f),i("dampedSine",4,y),i("recursiveSine",4,M),(()=>{const e=document.querySelector('[data-example="stringPhysics"]');if(!e)return;const t=e.querySelector("canvas");if(!t)return;const a=o(t);a.addWave({amplitude:1,wavelength:1,speed:.08});const i={amplitude:0,decay:.95};t.addEventListener("pointerdown",()=>{i.amplitude=100});const l=a.ctx;a.drawWave=(e,o=1)=>{i.amplitude*=i.decay;const{width:r,height:h}=s(a,t),d=.5*h;l.beginPath();for(let t=0;t<=r;t+=6){const a=d+Math.sin(.02*t+e.phase)*i.amplitude*.02;0===t?l.moveTo(t,a):l.lineTo(t,a)}l.lineWidth=1+.02*Math.abs(i.amplitude),l.shadowBlur=10,l.shadowColor=n(e.phase,128,210),l.strokeStyle=n(e.phase,128,210),l.stroke(),l.shadowBlur=0,e.phase+=.02*o},a.start()})(),(()=>{const e=document.querySelector('[data-example="audioSpectrogram"]');if(!e)return;const t=e.querySelector("canvas"),n=e.querySelector("[data-action=audio-start]"),i=e.querySelector("[data-audio-status]");if(!t||!n||!i)return;const l=o(t);l.addWave({amplitude:1,wavelength:1,speed:.05});const r=l.ctx;let h=null,d=null;n.addEventListener("click",()=>{h||(i.textContent="Listening",(async()=>{try{const e=new(window.AudioContext||window.webkitAudioContext),t=await navigator.mediaDevices.getUserMedia({audio:!0}),a=e.createMediaStreamSource(t);h=e.createAnalyser(),h.fftSize=128,d=new Uint8Array(h.frequencyBinCount),a.connect(h),i.textContent="Live"}catch(e){i.textContent="Blocked"}})())}),l.drawWave=(e,n=1)=>{const{width:o,height:i}=s(l,t);h&&d&&h.getByteFrequencyData(d);const c=o/64;r.lineWidth=1.5;for(let t=0;t<64;t+=1){const n=Math.floor(t/64*(d?d.length:64)),s=d?d[n]/255:.5*(Math.sin(e.phase+.2*t)+1),o=s*(.3*i),l=t*c+.5*c,h=.5*i;r.beginPath(),r.moveTo(l,h-o),r.lineTo(l,h+o);const u=a(s,180+t);r.strokeStyle=`hsla(${u}deg 80% 55% / 0.7)`,r.stroke()}e.phase+=.02*n},l.start()})()):setTimeout(x,50)};document.addEventListener("DOMContentLoaded",()=>{x()})})();