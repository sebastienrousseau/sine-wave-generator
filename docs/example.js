"use strict";(()=>{const e=2*Math.PI,t=e=>Math.min(1,Math.max(0,e)),a=(e,t=210)=>(t+140*e+360)%360,n=(e,t=128,a=210)=>{const n=e*(t/128);return`hsl(${(a+.5*(Math.sin(n)+1)*120)%360}deg 75% 55%)`},o=(e,t)=>({width:e.displayWidth||t.clientWidth||t.width||1,height:e.displayHeight||t.clientHeight||t.height||1}),s=(e,t)=>{if(!e||"function"!=typeof t)return;if(!("IntersectionObserver"in window))return void t();const a=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(a.unobserve(e.target),t())})},{threshold:.2});a.observe(e)},i=(e,t={})=>new SineWaveGenerator({el:e,...t}),r=(t,a,n)=>{const o=document.querySelector(`[data-example="${t}"]`);if(!o)return;const r=o.querySelector("canvas");if(!r)return;const l=(e=>{const t={bpm:96,amplitude:16,frequency:8,phase:0};return Array.from(e.querySelectorAll("[data-control]")).forEach(e=>{const a=e.dataset.control;t[a]=Number(e.value);const n=e.closest(".control-row").querySelector("[data-value]");n&&(n.textContent=e.value),e.addEventListener("input",()=>{t[a]=Number(e.value),n&&(n.textContent=e.value)})}),t})(o),h=i(r),c=((e,t)=>{let a=!1;return n=>{if(!a&&(a=!0,console.error(`[sine-wave-generator] ${e} failed`,n),t)&&!t.querySelector(".demo-error")){const e=document.createElement("span");e.className="demo-error",e.textContent="Demo stopped. Check console.",t.appendChild(e)}}})(t,o);h.addWave({amplitude:1,wavelength:1,speed:.05});const d=h.ctx;h.drawWave=(t,o=1)=>{try{const s=((e,t)=>e/(3600*Math.max(1,t)))(l.bpm,a),i=t.phase+l.phase*Math.PI/180;n({ctx:d,canvas:r,generator:h,controls:l,time:i}),t.phase+=s*e*o}catch(e){c(e),h.stop()}},s(r,()=>h.start())},l=(e,t)=>{const a=.1909830056250526;if(e<a||e>1-a)return 0;const n=(e-a)/(1-2*a);return Math.sin(n*Math.PI)*t},h=({ctx:n,canvas:s,controls:i,time:r,generator:l})=>{const{width:h,height:c}=o(l,s),d=h/16,u=c/10,g=.3*i.frequency,m=i.amplitude;for(let o=0;o<=10;o+=1)for(let s=0;s<=16;s+=1){const i=s*g+r,l=o*g+r,h=Math.sin(i)*Math.cos(l),c=4+m*t((h+1)/2),v=a(h,190);n.fillStyle=`hsl(${v}deg 70% 60%)`,n.beginPath(),n.arc(s*d+.2*d,o*u+.2*u,.25*c,0,e),n.fill()}},c=({ctx:t,canvas:n,controls:s,time:i,generator:r})=>{const{width:l,height:h}=o(r,n),c=s.amplitude,d=.04*s.frequency,u=.5*l;t.lineWidth=2;for(let n=0;n<=h;n+=6){const o=n*d+i,s=Math.sin(o)*c,r=Math.sin(o+Math.PI)*c,l=.5*(Math.cos(o)+1),h=a(l,210);t.strokeStyle=`hsla(${h}deg 80% 60% / ${.35+.5*l})`,t.beginPath(),t.moveTo(u+s,n),t.lineTo(u+r,n),t.stroke(),t.fillStyle=`hsla(${h}deg 80% 55% / ${.4+.6*l})`,t.beginPath(),t.arc(u+s,n,3+2*l,0,e),t.fill(),t.beginPath(),t.arc(u+r,n,3+2*(1-l),0,e),t.fill()}},d=({ctx:e,canvas:t,controls:a,time:s,generator:i})=>{const{width:r,height:l}=o(i,t),h=a.amplitude,c=.05*a.frequency;for(let t=0;t<6;t+=1){const a=r/7*(t+1);e.beginPath();for(let n=0;n<=l;n+=6){const o=n*c+s+.6*t,i=a+Math.sin(o)*h;0===n?e.moveTo(i,n):e.lineTo(i,n)}const o=1.5+1.2*(Math.sin(s+t)+1);e.lineWidth=o,e.shadowBlur=12,e.shadowColor=n(s,128,200+10*t),e.strokeStyle=n(s,128,200+10*t),e.stroke()}e.shadowBlur=0},u=({ctx:e,canvas:t,controls:a,time:s,generator:i})=>{const{width:r,height:l}=o(i,t),h=.4*a.amplitude,c=.08*a.frequency;for(let t=0;t<50;t+=1){const a=t/50*r,o=t/50*l,i=Math.sin(s+t*c)*h,d=a+i,u=o+.5*i,g=d+24,m=u+38,v=.8+.05*Math.abs(i);e.lineWidth=v,e.shadowBlur=8,e.shadowColor=n(s,128,240),e.strokeStyle=n(s+.2*t,128,240),e.beginPath(),e.moveTo(d,u),e.lineTo(g,m),e.stroke()}e.shadowBlur=0},g=({ctx:t,canvas:s,controls:i,time:r,generator:l})=>{const{width:h,height:c}=o(l,s),d=.5*h,u=.5*c,g=i.amplitude,m=i.frequency,v=i.phase*Math.PI/180;t.lineWidth=1.5+1.4*Math.abs(Math.sin(r)),t.shadowBlur=10,t.shadowColor=n(r,128,240),t.beginPath();for(let a=0;a<=240;a+=1){const n=a/240*e,o=d+Math.sin(n*m+r)*g*.9,s=u+Math.sin(n*(m+1)+v+r)*g;0===a?t.moveTo(o,s):t.lineTo(o,s)}const p=a(Math.sin(r),240);t.strokeStyle=`hsla(${p}deg 75% 55% / 0.8)`,t.stroke(),t.shadowBlur=0;const f=d+Math.sin(r*m)*g*.9,w=u+Math.sin(r*(m+1)+v)*g;t.fillStyle=`hsl(${p}deg 80% 60%)`,t.beginPath(),t.arc(f,w,6,0,e),t.fill()},m=({ctx:t,canvas:a,controls:s,time:i,generator:r})=>{const{width:l,height:h}=o(r,a),c=.5*l,d=.5*h,u=s.amplitude,g=.8*s.amplitude,m=Math.max(1,Math.round(s.frequency)),v=Math.max(1,Math.round(s.frequency+2)),p=s.phase*Math.PI/180;t.lineWidth=1.5+1.8*Math.abs(Math.sin(i)),t.shadowBlur=10,t.shadowColor=n(i,128,220),t.beginPath();for(let a=0;a<=320;a+=1){const n=a/320*e,o=c+u*Math.sin(m*n+p+i),s=d+g*Math.sin(v*n+i);0===a?t.moveTo(o,s):t.lineTo(o,s)}t.strokeStyle=n(i,128,220),t.stroke(),t.shadowBlur=0},v=({ctx:e,canvas:t,controls:s,time:i,generator:r})=>{const{width:l,height:h}=o(r,t),c=.5*h,d=s.amplitude,u=.04*s.frequency,g=.5*(Math.sin(.8*i)+1);e.beginPath();for(let t=0;t<=l;t+=4){const a=Math.sin(.006*t+i)*d*(.2+g),n=c+Math.sin(t*u+1.6*i)*a;0===t?e.moveTo(t,n):e.lineTo(t,n)}const m=a(g,260);e.lineWidth=1.5+2.2*g,e.shadowBlur=10,e.shadowColor=n(i,128,260),e.strokeStyle=`hsla(${m}deg 70% 55% / 0.85)`,e.stroke(),e.shadowBlur=0},p=({ctx:e,canvas:t,controls:n,time:s,generator:i})=>{const{width:r,height:l}=o(i,t),h=.03*n.frequency,c=n.amplitude;for(let t=0;t<8;t+=1){const o=t/7,i=l*(.2+.7*o),d=s+o*n.phase*.03;e.beginPath();for(let t=0;t<=r;t+=6){const a=c*(1-o)+6,n=i+Math.sin(t*h+d)*a;0===t?e.moveTo(t,n):e.lineTo(t,n)}const u=a(o,200);e.strokeStyle=`hsla(${u}deg 70% 55% / ${.2+.6*o})`,e.lineWidth=1.6,e.stroke()}},f=({ctx:t,canvas:s,controls:i,time:r,generator:l})=>{const{width:h,height:c}=o(l,s),d=.5*h,u=.5*c,g=.45*Math.min(h,c),m=.15*i.frequency,v=i.amplitude,p=r/e%1,f=Math.pow(Math.max(0,Math.cos(p*e)),6);for(let o=18;o<g;o+=12){const s=Math.sin(o*m+r),i=s*(v*(.4+f)),l=Math.max(1,o+i),h=a(s,280);t.strokeStyle=`hsla(${h}deg 75% 60% / 0.6)`,t.lineWidth=1+1.8*Math.abs(s),t.shadowBlur=10,t.shadowColor=n(r,128,280),t.beginPath(),t.arc(d,u,l,0,e),t.stroke()}t.shadowBlur=0},w=({ctx:e,canvas:t,controls:n,time:s,generator:i})=>{const{width:r,height:l}=o(i,t),h=10+2*n.frequency,c=.25*Math.sin(s)+n.phase*Math.PI/360,d=.5*r,u=.5*l,g=.75*Math.max(r,l),m=(t,n)=>{e.save(),e.translate(d,u),e.rotate(t),e.translate(-d,-u);for(let t=-g;t<=r+g;t+=h){const o=Math.sin(t/h*.35+s),i=a(o,n);e.strokeStyle=`hsla(${i}deg 70% 60% / 0.35)`,e.beginPath(),e.moveTo(t,-g),e.lineTo(t,l+g),e.stroke()}e.restore()};m(c,180),m(1.3*-c,240)},y=({ctx:e,canvas:t,controls:n,time:s,generator:i})=>{const{width:r,height:l}=o(i,t),h=n.amplitude,c=.6*n.frequency;e.textAlign="center",e.textBaseline="middle",e.font="600 28px 'SF Pro Text', 'Helvetica Neue', sans-serif";const d="SINE WAVE".split(""),u=18*d.length;d.forEach((t,n)=>{const o=n-d.length/2,i=Math.sin(s+o*c)*h,u=a(i/h,210);e.fillStyle=`hsl(${u}deg 80% 55%)`,e.fillText(t,.5*r+18*o,.5*l+i)}),e.strokeStyle="rgba(15, 23, 42, 0.1)",e.strokeRect(.5*r-.5*u-16,.5*l-30,u+32,60)},M=({ctx:t,canvas:n,controls:s,time:i,generator:r})=>{const{width:l,height:h}=o(r,n),c=.5*h,d=s.amplitude,u=.03*s.frequency,g=i/e%1,m=Math.exp(-3.2*g);t.beginPath();for(let e=0;e<=l;e+=4){const a=c+Math.sin(e*u+i)*d*m;0===e?t.moveTo(e,a):t.lineTo(e,a)}const v=a(m,140);t.strokeStyle=`hsla(${v}deg 70% 55% / 0.8)`,t.lineWidth=2,t.stroke()},x=({ctx:e,canvas:t,controls:s,time:i,generator:r})=>{const{width:l,height:h}=o(r,t),c=.5*h,d=s.amplitude,u=.02*s.frequency,g=.02*Math.sin(.8*i)*s.frequency;e.beginPath();for(let t=0;t<=l;t+=4){const a=.6*Math.sin(i+t*u*.4)+1,n=c+Math.sin(t*(u+g*a)+i)*d*(.6+.4*a);0===t?e.moveTo(t,n):e.lineTo(t,n)}const m=a(Math.sin(i),260);e.strokeStyle=`hsla(${m}deg 70% 55% / 0.85)`,e.lineWidth=1.5+1.5*Math.abs(Math.sin(i)),e.shadowBlur=8,e.shadowColor=n(i,128,260),e.stroke(),e.shadowBlur=0},b=()=>{"function"==typeof window.SineWaveGenerator?((()=>{const e=document.querySelector(".site-header"),t=document.querySelector(".nav-toggle");e&&t&&t.addEventListener("click",()=>{const a=e.classList.toggle("nav-open");t.setAttribute("aria-expanded",a?"true":"false")})})(),(()=>{const a=document.getElementById("sineCanvasBasic");if(a){const e=i(a);e.addWave({amplitude:26,wavelength:140,speed:.04,segmentLength:10}),s(a,()=>e.start())}const n=document.getElementById("sineCanvasMulti");if(n){const e=i(n);e.addWave({amplitude:18,wavelength:140,speed:.04,segmentLength:10}),e.addWave({amplitude:28,wavelength:200,speed:.035,segmentLength:12,strokeStyle:"rgba(14,165,233,0.5)"}),e.addWave({amplitude:12,wavelength:90,speed:.05,segmentLength:8,strokeStyle:"rgba(15,23,42,0.35)"}),s(n,()=>e.start())}const o=document.getElementById("sineCanvasPointer");if(o){const a=i(o);a.addWave({amplitude:32,wavelength:180,speed:.045,segmentLength:8});const n={x:.5,y:.5,rafId:null},r=()=>{n.rafId=null;const t=40+120*(1-2*Math.abs(n.y-.5)),o=120+240*(1-2*Math.abs(n.x-.5));a.waves.forEach(a=>{a.amplitude=t,a.wavelength=o,a.phase=n.y*e})};o.addEventListener("pointermove",e=>{const a=o.getBoundingClientRect();n.x=t((e.clientX-a.left)/a.width),n.y=t((e.clientY-a.top)/a.height),n.rafId||(n.rafId=requestAnimationFrame(r))}),s(o,()=>a.start())}const r=document.getElementById("sineCanvasDynamic");if(r){const e=i(r),t=[{amplitude:12,wavelength:100,speed:.035,segmentLength:10},{amplitude:20,wavelength:140,speed:.04,segmentLength:10},{amplitude:28,wavelength:180,speed:.045,segmentLength:10},{amplitude:36,wavelength:220,speed:.05,segmentLength:12},{amplitude:18,wavelength:120,speed:.038,segmentLength:8}];let a=0,n=!1;const o=()=>{e.waves.length<t.length?(e.addWave(t[a]),a=(a+1)%t.length,setTimeout(o,400)):n||(n=!0,setTimeout(l,600))},l=()=>{e.waves.length>1?(e.removeWave(0),setTimeout(l,400)):(n=!1,setTimeout(o,600))};s(r,()=>{o(),e.start()})}const h=document.getElementById("sineCanvasPerformance");if(h){const e=i(h,{maxPixelRatio:1});e.addWave({amplitude:18,wavelength:160,speed:.035,segmentLength:14}),e.addWave({amplitude:10,wavelength:120,speed:.04,segmentLength:16}),e.addWave({amplitude:6,wavelength:90,speed:.045,segmentLength:18}),s(h,()=>e.start())}const c=document.getElementById("sineCanvasEasing");if(c){const e=i(c);e.addWave({amplitude:30,wavelength:160,speed:.04,segmentLength:10,easing:l}),s(c,()=>e.start())}const d=document.getElementById("sineCanvasPause");if(d){const e=i(d);e.addWave({amplitude:24,wavelength:150,speed:.04,segmentLength:10});const t=document.querySelector('[data-action="pause"]'),a=document.querySelector('[data-action="resume"]');t&&t.addEventListener("click",()=>e.stop()),a&&a.addEventListener("click",()=>e.start()),s(d,()=>e.start())}})(),r("pulseMatrix",4,h),r("dnaHelix",4,c),r("fluidColumn",4,d),r("diagonalRain",4,u),r("lissajousOrbit",3,g),r("lissajousExplorer",4,m),r("feedbackLoop",4,v),r("waveformTerrain",6,p),r("radialBloom",4,f),r("labOcean",6,p),r("labHelix",4,c),r("labPulse",4,f),r("labOrbit",3,g),r("moireInterference",4,w),r("kineticTypography",4,y),r("dampedSine",4,M),r("recursiveSine",4,x),(()=>{const e=document.querySelector('[data-example="stringPhysics"]');if(!e)return;const t=e.querySelector("canvas");if(!t)return;const a=i(t);a.addWave({amplitude:1,wavelength:1,speed:.08});const r={amplitude:0,decay:.95};t.addEventListener("pointerdown",()=>{r.amplitude=100});const l=a.ctx;a.drawWave=(e,s=1)=>{r.amplitude*=r.decay;const{width:i,height:h}=o(a,t),c=.5*h;l.beginPath();for(let t=0;t<=i;t+=6){const a=c+Math.sin(.02*t+e.phase)*r.amplitude*.02;0===t?l.moveTo(t,a):l.lineTo(t,a)}l.lineWidth=1+.02*Math.abs(r.amplitude),l.shadowBlur=10,l.shadowColor=n(e.phase,128,210),l.strokeStyle=n(e.phase,128,210),l.stroke(),l.shadowBlur=0,e.phase+=.02*s},s(t,()=>a.start())})(),(()=>{const e=document.querySelector('[data-example="audioSpectrogram"]');if(!e)return;const t=e.querySelector("canvas"),n=e.querySelector("[data-action=audio-start]"),r=e.querySelector("[data-audio-status]");if(!t||!n||!r)return;const l=i(t);l.addWave({amplitude:1,wavelength:1,speed:.05});const h=l.ctx;let c=null,d=null;n.addEventListener("click",()=>{c||(r.textContent="Listening",(async()=>{try{const e=new(window.AudioContext||window.webkitAudioContext),t=await navigator.mediaDevices.getUserMedia({audio:!0}),a=e.createMediaStreamSource(t);c=e.createAnalyser(),c.fftSize=128,d=new Uint8Array(c.frequencyBinCount),a.connect(c),r.textContent="Live"}catch(e){r.textContent="Blocked"}})())}),l.drawWave=(e,n=1)=>{const{width:s,height:i}=o(l,t);c&&d&&c.getByteFrequencyData(d);const r=s/64;h.lineWidth=1.5;for(let t=0;t<64;t+=1){const n=Math.floor(t/64*(d?d.length:64)),o=d?d[n]/255:.5*(Math.sin(e.phase+.2*t)+1),s=o*(.3*i),l=t*r+.5*r,c=.5*i;h.beginPath(),h.moveTo(l,c-s),h.lineTo(l,c+s);const u=a(o,180+t);h.strokeStyle=`hsla(${u}deg 80% 55% / 0.7)`,h.stroke()}e.phase+=.02*n},s(t,()=>l.start())})()):setTimeout(b,50)};document.addEventListener("DOMContentLoaded",()=>{b()})})();